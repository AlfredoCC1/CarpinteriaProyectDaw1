<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Control | Carpintería</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">

    <!-- AOS (animaciones) -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">

    <!-- CSS global + fragments -->
    <link rel="stylesheet" th:href="@{/css/global.css}">
    <link rel="stylesheet" th:href="@{/css/dashboard/topbar.css}">
    <link rel="stylesheet" th:href="@{/css/dashboard/asidebar.css}">
    <link rel="stylesheet" th:href="@{/css/dashboard.css}">
    <link rel="stylesheet" th:href="@{/css/dashboard/graficos.css}">

</head>
<body>

<div class="layout">

    <!-- ASIDE Reutilizable -->
    <div th:replace="~{dashboard/asidebar :: mainAsidebar}"></div>

    <!-- CONTENIDO PRINCIPAL -->
    <div class="content">
        <!-- TOPBAR Reutilizable -->
        <div th:replace="~{dashboard/topbar :: mainTopbar}"></div>

        <!-- CONTENIDO INTERIOR -->
        <main class="content-inner">

            <!-- ========== VISTA 1: DASHBOARD ========== -->
            <div id="view-dashboard" class="view-container active">
                <!-- RESUMEN DE MÉTRICAS -->
                <div class="section-header" data-aos="fade-up">
                    <div>
                        <h2>Resumen de hoy</h2>
                        <small>Estado general del negocio en las últimas 24 horas.</small>
                    </div>
                    <button class="btn btn-sm btn-outline-secondary">
                        <i class="fa-solid fa-rotate me-1"></i> Actualizar datos
                    </button>
                </div>

                <div class="row g-3 mb-4">
                    <div class="col-md-3" data-aos="fade-up" data-aos-delay="0">
                        <div class="card card-metric">
                            <div class="card-body d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="metric-label">Productos activos</div>
                                    <div class="metric-value" th:text="${totalProductos}">48</div>
                                    <div class="metric-trend text-success">
                                        <i class="fa-solid fa-arrow-up me-1"></i> +5 nuevos
                                    </div>
                                </div>
                                <div class="card-metric-icon bg-soft-primary">
                                    <i class="fa-solid fa-chair"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-3" data-aos="fade-up" data-aos-delay="100">
                        <div class="card card-metric">
                            <div class="card-body d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="metric-label">Clientes registrados</div>
                                    <div class="metric-value" th:text="${totalClientes}">132</div>
                                    <div class="metric-trend text-success">
                                        <i class="fa-solid fa-user-plus me-1"></i> +3 hoy
                                    </div>
                                </div>
                                <div class="card-metric-icon bg-soft-success">
                                    <i class="fa-solid fa-user-group"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-3" data-aos="fade-up" data-aos-delay="200">
                        <div class="card card-metric">
                            <div class="card-body d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="metric-label">Pedidos del mes</div>
                                    <div class="metric-value" th:text="${pedidosMes}">27</div>
                                    <div class="metric-trend text-warning">
                                        <i class="fa-solid fa-clock me-1"></i> 6 en progreso
                                    </div>
                                </div>
                                <div class="card-metric-icon bg-soft-warning">
                                    <i class="fa-solid fa-file-invoice-dollar"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-3" data-aos="fade-up" data-aos-delay="300">
                        <div class="card card-metric">
                            <div class="card-body d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="metric-label">Ingresos aprox. (S/)</div>
                                    <div class="metric-value" th:text="${ingresosMes}">18,450</div>
                                    <div class="metric-trend text-success">
                                        <i class="fa-solid fa-arrow-up-right-dots me-1"></i> +12% vs mes anterior
                                    </div>
                                </div>
                                <div class="card-metric-icon bg-soft-info">
                                    <i class="fa-solid fa-sack-dollar"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- GRÁFICOS Y PANELES -->
                <div class="row g-3 mb-4">
                    <div class="col-lg-8" data-aos="fade-up">
                        <div class="card card-soft h-100">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <div>
                                        <h6 class="mb-0">Pedidos por mes</h6>
                                        <small class="text-muted">Últimos 6 meses</small>
                                    </div>
                                    <div class="dropdown">
                                        <button class="btn btn-sm btn-light dropdown-toggle" data-bs-toggle="dropdown">
                                            Ver: 6 meses
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-end">
                                            <li><a class="dropdown-item" href="#">Últimos 3 meses</a></li>
                                            <li><a class="dropdown-item" href="#">Últimos 6 meses</a></li>
                                            <li><a class="dropdown-item" href="#">Último año</a></li>
                                        </ul>
                                    </div>
                                </div>
                                <canvas id="ordersChart" height="140"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4" data-aos="fade-up" data-aos-delay="100">
                        <div class="card card-soft h-100">
                            <div class="card-body">
                                <h6 class="mb-2">Distribución de productos</h6>
                                <small class="text-muted d-block mb-2">Por categoría principal</small>
                                <canvas id="productsChart" height="180"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- TABLA + TAREAS -->
                <div class="row g-3">
                    <div class="col-lg-8" data-aos="fade-up">
                        <div class="card card-soft">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <h6 class="mb-0">Últimos pedidos</h6>
                                    <a href="#" class="small text-decoration-none">Ver todos</a>
                                </div>

                                <div class="table-responsive">
                                    <table class="table table-sm align-middle mb-0">
                                        <thead>
                                        <tr>
                                            <th>Cliente</th>
                                            <th>Proyecto</th>
                                            <th>Fecha</th>
                                            <th>Estado</th>
                                            <th class="text-end">Total (S/)</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td>Lucía Morales</td>
                                            <td>Cocina integral</td>
                                            <td>26/11</td>
                                            <td><span class="status-badge bg-success-subtle text-success">En producción</span></td>
                                            <td class="text-end">7,800</td>
                                        </tr>
                                        <tr>
                                            <td>Carlos Peña</td>
                                            <td>Mobiliario cafetería</td>
                                            <td>25/11</td>
                                            <td><span class="status-badge bg-warning-subtle text-warning">Diseño</span></td>
                                            <td class="text-end">5,450</td>
                                        </tr>
                                        <tr>
                                            <td>Andrea Salas</td>
                                            <td>Restauración comedor</td>
                                            <td>24/11</td>
                                            <td><span class="status-badge bg-info-subtle text-info">Entregado</span></td>
                                            <td class="text-end">2,300</td>
                                        </tr>
                                        <tr>
                                            <td>Pedro Díaz</td>
                                            <td>Closet empotrado</td>
                                            <td>23/11</td>
                                            <td><span class="status-badge bg-secondary-subtle text-secondary">Cotización</span></td>
                                            <td class="text-end">1,950</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4" data-aos="fade-up" data-aos-delay="100">
                        <div class="card card-soft mb-3">
                            <div class="card-body">
                                <h6 class="mb-2">Tareas pendientes</h6>
                                <small class="text-muted d-block mb-2">Hoy</small>
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item px-0 d-flex justify-content-between">
                                        <span><i class="fa-regular fa-square me-2"></i> Llamar a proveedor de madera</span>
                                        <span class="badge bg-light text-muted">09:30</span>
                                    </li>
                                    <li class="list-group-item px-0 d-flex justify-content-between">
                                        <span><i class="fa-regular fa-square me-2"></i> Enviar cotización a Sr. Díaz</span>
                                        <span class="badge bg-light text-muted">11:00</span>
                                    </li>
                                    <li class="list-group-item px-0 d-flex justify-content-between">
                                        <span><i class="fa-regular fa-square me-2"></i> Revisar diseño de cafetería</span>
                                        <span class="badge bg-light text-muted">15:00</span>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div class="card card-soft">
                            <div class="card-body">
                                <h6 class="mb-2">Notas rápidas</h6>
                                <textarea class="form-control form-control-sm mb-2" rows="3"
                                          placeholder="Apunta ideas, medidas o recordatorios breves..."></textarea>
                                <button class="btn btn-sm btn-outline-secondary w-100">
                                    <i class="fa-regular fa-floppy-disk me-1"></i> Guardar nota
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ========== VISTA 2: LÍNEAS DE DISEÑO ========== -->
            <div th:replace="~{dashboard/linea :: mainLinea}"></div>

            <!-- ========== VISTA 3: CATEGORÍAS ========== -->
            <div th:replace="~{dashboard/categoria :: mainCategoria}"></div>

            <!-- ========== VISTA 4: PRODUCTOS ========== -->
            <div id="view-productos" class="view-container">
                <div class="section-header" data-aos="fade-up">
                    <div>
                        <h2>Productos</h2>
                        <small>Administra tu catálogo de productos</small>
                    </div>
                    <button class="btn btn-sm btn-primary">
                        <i class="fa-solid fa-plus me-1"></i> Nuevo Producto
                    </button>
                </div>

                <!-- FORMULARIO DE PRODUCTO -->
                <div class="form-view" data-aos="fade-up">
                    <div class="form-header">
                        <h3>Agregar Nuevo Producto</h3>
                        <small>Completa la información del nuevo producto</small>
                    </div>

                    <form id="form-producto">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Nombre del Producto</label>
                                    <input type="text" class="form-control" placeholder="Ej: Mesa de Roble, Sofá Moderno" required>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="mb-3">
                                    <label class="form-label">Categoría</label>
                                    <select class="form-select" required>
                                        <option value="">Seleccionar...</option>
                                        <option value="1">Mesas</option>
                                        <option value="2">Sillas</option>
                                        <option value="3">Sofás</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="mb-3">
                                    <label class="form-label">Línea de Diseño</label>
                                    <select class="form-select">
                                        <option value="">Seleccionar...</option>
                                        <option value="1">Clásico</option>
                                        <option value="2">Moderno</option>
                                        <option value="3">Rústico</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Precio (S/)</label>
                                    <input type="number" class="form-control" placeholder="0.00" step="0.01">
                                    <small class="text-muted">Dejar vacío para "A cotizar"</small>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Material</label>
                                    <input type="text" class="form-control" placeholder="Ej: Roble, Pino, MDF">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Estado</label>
                                    <select class="form-select" required>
                                        <option value="1">Activo</option>
                                        <option value="0">Inactivo</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="mb-3">
                                    <label class="form-label">Descripción</label>
                                    <textarea class="form-control" rows="3" placeholder="Describe el producto..."></textarea>
                                </div>
                            </div>
                            <div class="col-12">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fa-solid fa-save me-2"></i> Guardar Producto
                                </button>
                            </div>
                        </div>
                    </form>
                </div>

                <!-- TABLA DE PRODUCTOS -->
                <div class="table-view" data-aos="fade-up" data-aos-delay="100">
                    <div class="table-header">
                        <h4>Productos Registrados</h4>
                        <div class="table-actions">
                            <div class="input-group input-group-sm" style="width: 250px;">
                                <span class="input-group-text"><i class="fa-solid fa-search"></i></span>
                                <input type="text" class="form-control" placeholder="Buscar productos...">
                            </div>
                            <select class="form-select form-select-sm" style="width: 150px;">
                                <option value="">Todas las categorías</option>
                                <option value="1">Mesas</option>
                                <option value="2">Sillas</option>
                                <option value="3">Sofás</option>
                            </select>
                        </div>
                    </div>

                    <div class="table-responsive">
                        <table class="table table-hover mb-0">
                            <thead>
                            <tr>
                                <th width="60">ID</th>
                                <th>Producto</th>
                                <th width="120">Categoría</th>
                                <th width="120">Línea</th>
                                <th width="100">Precio</th>
                                <th width="80">Estado</th>
                                <th width="140">Acciones</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>1</td>
                                <td>
                                    <strong>Mesa de Comedor Extensible</strong><br>
                                    <small class="text-muted">Roble macizo</small>
                                </td>
                                <td>Mesas</td>
                                <td>Clásico</td>
                                <td>S/ 850.00</td>
                                <td><span class="badge bg-success">Activo</span></td>
                                <td>
                                    <button class="btn btn-sm btn-outline-primary me-1">
                                        <i class="fa-solid fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger me-1">
                                        <i class="fa-solid fa-trash"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-secondary">
                                        <i class="fa-solid fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>
                                    <strong>Sofá Seccional 3 Piezas</strong><br>
                                    <small class="text-muted">Tela gris antimanchas</small>
                                </td>
                                <td>Sofás</td>
                                <td>Moderno</td>
                                <td>S/ 1,200.00</td>
                                <td><span class="badge bg-success">Activo</span></td>
                                <td>
                                    <button class="btn btn-sm btn-outline-primary me-1">
                                        <i class="fa-solid fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger me-1">
                                        <i class="fa-solid fa-trash"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-secondary">
                                        <i class="fa-solid fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>
                                    <strong>Estantería Modular</strong><br>
                                    <small class="text-muted">MDF laminado nogal</small>
                                </td>
                                <td>Estanterías</td>
                                <td>Moderno</td>
                                <td>S/ 380.00</td>
                                <td><span class="badge bg-secondary">Inactivo</span></td>
                                <td>
                                    <button class="btn btn-sm btn-outline-primary me-1">
                                        <i class="fa-solid fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger me-1">
                                        <i class="fa-solid fa-trash"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-secondary">
                                        <i class="fa-solid fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- ========== VISTA 5: CLIENTES ========== -->
            <div id="view-clientes" class="view-container">
                <div class="section-header" data-aos="fade-up">
                    <div>
                        <h2>Clientes</h2>
                        <small>Administra la información de tus clientes</small>
                    </div>
                    <button class="btn btn-sm btn-primary">
                        <i class="fa-solid fa-plus me-1"></i> Nuevo Cliente
                    </button>
                </div>

                <!-- En construcción -->
                <div class="card card-soft text-center py-5" data-aos="fade-up">
                    <div class="card-body">
                        <i class="fa-solid fa-tools display-4 text-muted mb-3"></i>
                        <h4>En Construcción</h4>
                        <p class="text-muted mb-0">La vista de clientes estará disponible próximamente.</p>
                    </div>
                </div>
            </div>

            <!-- ========== VISTA 6: PEDIDOS ========== -->
            <div id="view-pedidos" class="view-container">
                <div class="section-header" data-aos="fade-up">
                    <div>
                        <h2>Pedidos</h2>
                        <small>Gestiona y sigue los pedidos de tus clientes</small>
                    </div>
                    <button class="btn btn-sm btn-primary">
                        <i class="fa-solid fa-plus me-1"></i> Nuevo Pedido
                    </button>
                </div>

                <!-- En construcción -->
                <div class="card card-soft text-center py-5" data-aos="fade-up">
                    <div class="card-body">
                        <i class="fa-solid fa-tools display-4 text-muted mb-3"></i>
                        <h4>En Construcción</h4>
                        <p class="text-muted mb-0">La vista de pedidos estará disponible próximamente.</p>
                    </div>
                </div>
            </div>

            <!-- ========== VISTA 7: USUARIOS ========== -->
            <div id="view-usuarios" class="view-container">
                <div class="section-header" data-aos="fade-up">
                    <div>
                        <h2>Usuarios</h2>
                        <small>Administra los usuarios del sistema</small>
                    </div>
                    <button class="btn btn-sm btn-primary">
                        <i class="fa-solid fa-plus me-1"></i> Nuevo Usuario
                    </button>
                </div>

                <!-- En construcción -->
                <div class="card card-soft text-center py-5" data-aos="fade-up">
                    <div class="card-body">
                        <i class="fa-solid fa-tools display-4 text-muted mb-3"></i>
                        <h4>En Construcción</h4>
                        <p class="text-muted mb-0">La vista de usuarios estará disponible próximamente.</p>
                    </div>
                </div>
            </div>

            <!-- ========== VISTA 8: CONFIGURACIÓN ========== -->
            <div id="view-configuracion" class="view-container">
                <div class="section-header" data-aos="fade-up">
                    <div>
                        <h2>Configuración</h2>
                        <small>Configura los parámetros del sistema</small>
                    </div>
                </div>

                <!-- En construcción -->
                <div class="card card-soft text-center py-5" data-aos="fade-up">
                    <div class="card-body">
                        <i class="fa-solid fa-tools display-4 text-muted mb-3"></i>
                        <h4>En Construcción</h4>
                        <p class="text-muted mb-0">La vista de configuración estará disponible próximamente.</p>
                    </div>
                </div>
            </div>

        </main>
    </div>
</div>

<!-- JS LIBS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script th:src="@{/js/InicializaAOS.js}"></script>
<script th:src="@{/js/Dashboard-Main.js}"></script>
<script th:src="@{/js/Dashboard-Vistas.js}"></script>
<script th:src="@{/js/Dashboard-Graficos.js}"></script>

</body>
</html>